<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="color-scheme" content="light only" />
    <title>LOG. / The Quiet City</title>
    <style>
      .modal {
        display: none;
        position: fixed;
        z-index: 2000;
        left: 0;
        top: 0;
        width: 100vw;
        height: 100vh;
        background-color: rgba(0, 0, 0, 0.9);
        align-items: center;
        justify-content: center;
        flex-direction: column;
      }

      .modal.is-open {
        display: flex;
      }

      .modal-content {
        max-width: 90%;
        max-height: 80vh;
        margin: 2rem auto 1rem;
        display: block;
        margin-left: auto;
        margin-right: auto;
      }

      body {
        margin: 0;
        font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue",
          sans-serif;
        background-color: #fff;
        color: #111;
        overflow-x: hidden;
      }
      body {
        overflow-anchor: none;
      }
      html, body { height: 100%; }
      .page {
        min-height: 100%;       /* fallback to avoid iOS extra scroll */
        min-height: 100dvh;     /* modern viewport unit, prevents extra space under footer */
        display: flex;
        flex-direction: column;
      }
      main { flex: 1 0 auto; }
      body { overscroll-behavior-y: contain; }
      body.scroll-lock {
        overflow: hidden;
      }

      .sticky-header {
        position: fixed;
        top: 0;
        width: 100%;
        z-index: 1000;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 2rem 2.5rem;
        background-color: transparent;
        transition: background-color 0.3s ease, box-shadow 0.3s ease,
          backdrop-filter 0.3s ease, padding 0.3s;
      }

      body.scroll-lock .sticky-header {
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.2s ease;
      }

      .sticky-header.scrolled {
        background-color: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        box-shadow: 0 1px 4px rgba(0, 0, 0, 0.05);
        border-bottom: 1px solid #eee; /* 明確な区切り線を追加 */
        /* height remains unchanged */
      }

      /* Force light theme even under system dark mode */
      @media (prefers-color-scheme: dark) {
        body {
          background-color: #fff;
          color: #111;
        }
        .sticky-header.scrolled {
          background-color: rgba(255, 255, 255, 0.95);
          backdrop-filter: blur(10px);
          -webkit-backdrop-filter: blur(10px);
          box-shadow: 0 1px 4px rgba(0, 0, 0, 0.05);
          border-bottom: 1px solid #eee;
        }
        section {
          color: #333;
        }
        .caption {
          color: #222;
        }
        footer {
          color: #aaa;
          border-top: 1px solid #ddd;
        }
      }

      .logo {
        font-size: 1.2rem;
        font-weight: bold;
        color: inherit;
        text-decoration: none;
        cursor: pointer;
      }
      .logo:focus,
      .logo:hover {
        text-decoration: none;
      }
      .logo:focus {
        outline: none;
      }

      /* LOG. / The Quiet City リンクのマウスオーバースタイル */
      .logo:hover {
        text-decoration: none;
        color: gray;
      }

      html {
        scroll-behavior: smooth;
      }

      /* .menu-icon { removed for hamburger menu deletion */
      /*   font-size: 1.5rem; */
      /*   cursor: pointer; */
      /* } */
      footer nav {
        margin-bottom: 1rem;
      }

      footer nav a {
        color: #aaa;
        text-decoration: none;
        margin: 0 0.5rem;
        font-size: 0.85rem;
      }

      footer nav a:hover {
        text-decoration: underline;
      }

      main {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        padding: 4rem 2rem 2rem; /* Adjusted for fixed header height */
      }

      .date-location {
        margin-top: 0.5rem;
        font-size: 0.85rem;
        color: #666;
      }

      .photo-block img {
        margin-bottom: 24px; /* 写真とキャプションの間に余白を追加 */
        /* Not used, since .photo uses background-image */
      }

      .photo-block {
        margin-bottom: 64px; /* 各ブロック同士の余白を増やす */
      }

      .photo {
        width: 80vmin;
        max-width: 600px;
        aspect-ratio: 1 / 1;
        background-color: #000 !important;
        background-size: cover;
        background-position: center;
        margin-bottom: 2.5rem;
        transition: transform 0.3s ease;
        border: 1.5px solid #ddd;
        box-sizing: border-box;
      }

      .photo:hover {
        transform: scale(1.02);
      }

      .caption {
        font-size: 0.95rem;
        color: #222;
        max-width: 500px;
        margin: 0 auto 0.25rem;
        text-align: center;
        line-height: 1.6; /* わずかに行間UP */
        letter-spacing: 0.02em; /* 字間をほんの少し広げる */
      }
      .date-location {
        letter-spacing: 0.015em;
      }
      section p {
        line-height: 1.8;
        letter-spacing: 0.02em;
      }

      .caption:hover {
        color: #000;
      }

      footer {
        margin-top: auto;
        text-align: center;
        font-size: 0.8rem;
        color: #aaa;
        padding-bottom: 2rem;
        border-top: 1px solid #ddd;
        padding-top: 1.5rem;
      }

      .exif-info {
        font-size: 0.75rem;
        color: #888;
        margin-top: 0.5rem;
        text-align: center;
        position: relative;
        z-index: 1000;
        margin-left: auto;
        margin-right: auto;
      }
      #modal .exif-info {
        max-width: min(90vw, 600px);
        padding: 0.5rem 1rem;
        text-align: center;
        line-height: 1.6;
        overflow-wrap: anywhere; /* 長い英数でも折り返す */
        word-break: keep-all; /* 可能なら語中で切らない */
        font-size: clamp(12px, 3.5vw, 14px);
        color: #ccc; /* 暗い背景で読みやすく */
        margin-left: auto;
        margin-right: auto;
      }
      .entry + hr {
        margin: 32px auto 96px;
        border: none;
        border-top: 1px solid #ddd;
        width: 60%;
      }

      /* Wider <hr> on small screens for better balance */
      @media (max-width: 640px) {
        .entry + hr {
          width: 86%;
          margin: 28px auto 80px;
        }
      }
    </style>
    <!-- Favicons -->
    <link rel="icon" href="favicon.svg" type="image/svg+xml" />
    <link rel="icon" href="favicon.png" type="image/png" sizes="32x32" />
    <link rel="alternate icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="mask-icon" href="favicon.svg" color="#111111" />
  </head>
  <body>
    <div class="page">
    <div id="modal" class="modal">
      <img id="modal-img" class="modal-content" />
      <div class="exif-info" style="display: block"></div>
    </div>

    <header class="sticky-header">
      <a href="#" class="logo">LOG. / The Quiet City</a>
    </header>

    <section
      style="
        max-width: 600px;
        margin: 8rem auto 2rem;
        padding: 0 1.5rem;
        font-size: 1rem;
        line-height: 1.7;
        color: #333;
        text-align: center;
      "
    >
      <h2 style="font-size: 1.4rem; margin-bottom: 1rem">Statement</h2>
      <p>雑踏の中で</p>
      <p>沈黙を切り取る</p>
    </section>

    <main>
      <!-- 1 -->
      <div class="entry photo-block">
        <div
          class="photo"
          style="background-image: url('assets/images/silent_00.jpg')"
          data-exif="Device: RICOH GR III<br>Focal Length: 28mm<br>Aperture: f/2.8<br>ISO: 3,200<br>Shutter: 1/50"
          role="img"
          aria-label="路地裏の視線"
        ></div>
        <div class="caption">路地裏の視線</div>
        <div class="date-location">2023.08.03 / Asakusa</div>
      </div>
      <hr />

      <!-- 2 -->
      <div class="entry photo-block">
        <div
          class="photo"
          style="background-image: url('assets/images/silent_23.jpg')"
          data-exif="Device: RICOH GR IIIx<br>Focal Length: 40mm<br>Aperture: f/2.8<br>ISO: 100<br>Shutter: 1/15"
          role="img"
          aria-label="PUNKは死んだと言われても"
        ></div>
        <div class="caption">PUNKは死んだと言われても</div>
        <div class="date-location">2021.04.16 / Golden Gai</div>
      </div>
      <hr />

      <!-- 3 -->
      <div class="entry photo-block">
        <div
          class="photo"
          style="background-image: url('assets/images/silent_62.jpg')"
          data-exif="Device: RICOH GR IIIx HDF<br>Focal Length: 40mm<br>Aperture: f/2.8<br>ISO: 10,000<br>Shutter: 1/125"
          role="img"
          aria-label="無音のアンプと夜"
        ></div>
        <div class="caption">無音のアンプと夜</div>
        <div class="date-location">2024.07.08 / Kabukicho</div>
      </div>
      <hr />

      <!-- 4 -->
      <div class="entry photo-block">
        <div
          class="photo"
          style="background-image: url('assets/images/silent_39.jpg')"
          data-exif="Device: RICOH GR IIIx<br>Focal Length: 40mm<br>Aperture: f/3.2<br>ISO: 100<br>Shutter: 1/160"
          role="img"
          aria-label="気配だけが静かに"
        ></div>
        <div class="caption">気配だけが静かに</div>
        <div class="date-location">2021.04.18 / Shinjuku Gyoen</div>
      </div>
      <hr />

      <!-- 5 -->
      <div class="entry photo-block">
        <div
          class="photo"
          style="background-image: url('assets/images/silent_08.jpg')"
          data-exif="Device: RICOH GR IIIx<br>Focal Length: 40mm<br>Aperture: f/2.8<br>ISO: 6,400<br>Shutter: 1/80"
          role="img"
          aria-label="その灯りは待つ人のために"
        ></div>
        <div class="caption">その灯りは待つ人のために</div>
        <div class="date-location">2024.12.25 / Shinjuku</div>
      </div>
      <hr />

      <!-- 6 -->
      <div class="entry photo-block">
        <div
          class="photo"
          style="background-image: url('assets/images/silent_28.jpg')"
          data-exif="Device: RICOH GR III<br>Focal Length: 28mm<br>Aperture: f/11<br>ISO: 6,400<br>Shutter: 0.6"
          role="img"
          aria-label="過ぎ去った時間がぼやける"
        ></div>
        <div class="caption">過ぎ去った時間がぼやける</div>
        <div class="date-location">2022.10.25 / Golden Gai</div>
      </div>
      <hr />

      <!-- 7 -->
      <div class="entry photo-block">
        <div
          class="photo"
          style="background-image: url('assets/images/silent_07.jpg')"
          data-exif="Device: PENTAX K-1<br>Focal Length: 77mm<br>Aperture: f/1.8<br>ISO: 200<br>Shutter: 5"
          role="img"
          aria-label="ガラス越しの世界"
        ></div>
        <div class="caption">ガラス越しの世界</div>
        <div class="date-location">2021.12.23 / Kabukicho</div>
      </div>
      <hr />

      <!-- 8 -->
      <div class="entry photo-block">
        <div
          class="photo"
          style="background-image: url('assets/images/silent_13.jpg')"
          data-exif="Device: PENTAX K-1<br>Focal Length: 43mm<br>Aperture: f/1.9<br>ISO: 6,400<br>Shutter: 1/4"
          role="img"
          aria-label="ぶれているのこの街か"
        ></div>
        <div class="caption">ぶれているのこの街か</div>
        <div class="date-location">2022.04.02 / Kabukicho</div>
      </div>
      <hr />

      <!-- 9 -->
      <div class="entry photo-block">
        <div
          class="photo"
          style="background-image: url('assets/images/silent_59.jpg')"
          data-exif="Device: RICOH GR IIIx HDF<br>Focal Length: 40mm<br>Aperture: f/4.5<br>ISO: 100<br>Shutter: 1/320"
          role="img"
          aria-label="音のない空に揺れる"
        ></div>
        <div class="caption">音のない空に揺れる</div>
        <div class="date-location">2024.06.23 / Shinjuku Gyoen</div>
      </div>
      <hr />

      <!-- 10 -->
      <div class="entry photo-block">
        <div
          class="photo"
          style="background-image: url('assets/images/silent_01.jpg')"
          data-exif="Device: Galaxy S25 Ultra<br>Focal Length: 23mm<br>Aperture: f/3.4<br>ISO: 64<br>Shutter: 1/400"
          role="img"
          aria-label="鳥居の先は別世界"
        ></div>
        <div class="caption">鳥居の先は別世界</div>
        <div class="date-location">2025.07.28 / Meiji Jingu</div>
      </div>
    </main>

    <footer>
      <nav>
        <a href="#">All</a> / <a href="about.html">About</a> /
        <a href="mailto:h.syousuke.0224@gmail.com?subject=Inquiry%20from%20LOG"
          >Contact</a
        >
      </nav>
      &copy; 2025 Daisuke Takaku
    </footer>
    </div><!-- /.page -->
  </body>
  <script>
    // 初回表示/リロード時のスクロール位置を先頭に固定（#topが付いていてもトップへ）
    if ("scrollRestoration" in history) {
      history.scrollRestoration = "manual";
    }
    function clearTopHash() {
      if (location.hash === "#top" || location.hash === "") {
        try {
          history.replaceState(null, "", location.pathname);
        } catch (e) {}
      }
    }
    function forceTop() {
      window.scrollTo({ top: 0, left: 0, behavior: "auto" });
    }
    window.addEventListener("load", () => {
      if (location.hash === "" || location.hash === "#top") {
        clearTopHash();
        forceTop();
        requestAnimationFrame(forceTop);
        setTimeout(forceTop, 100);
        setTimeout(forceTop, 400);
      }
    });
  </script>
  <script>
    const modal = document.getElementById("modal");
    const modalImg = document.getElementById("modal-img");
    const exifDiv = modal.querySelector(".exif-info");
    const photos = Array.from(document.querySelectorAll(".photo"));
    let currentIndex = -1;

    function openAt(index) {
      currentIndex = index;
      const el = photos[currentIndex];
      modalImg.src = el.style.backgroundImage.slice(5, -2);
      exifDiv.innerHTML = el.getAttribute("data-exif");
      modal.classList.add("is-open");
      document.body.classList.add("scroll-lock");
    }
    function closeModal() {
      modal.classList.remove("is-open");
      currentIndex = -1;
      document.body.classList.remove("scroll-lock");
    }
    function showNext(dir) {
      if (currentIndex < 0) return;
      // dir: 1 for next, -1 for prev
      if (dir === 1) {
        if (currentIndex === photos.length - 1) {
          // 最後の画像で次へは何もしない
          return;
        }
        currentIndex += 1;
      } else if (dir === -1) {
        if (currentIndex === 0) {
          // 最初の画像で前へは何もしない
          return;
        }
        currentIndex -= 1;
      }
      const el = photos[currentIndex];
      modalImg.src = el.style.backgroundImage.slice(5, -2);
      exifDiv.innerHTML = el.getAttribute("data-exif");
    }

    photos.forEach((photo, i) => {
      photo.addEventListener("click", () => openAt(i));
    });

    // クリックで背景を押したら閉じる（既存動作維持）
    modal.addEventListener("click", (e) => {
      if (e.target === modal) closeModal();
    });

    // 画像クリックでは閉じない（背景クリックのみで閉）
    modalImg.addEventListener("click", (e) => {
      e.stopPropagation();
    });

    // キー操作: ESCで閉じる、↑↓で前後
    window.addEventListener("keydown", (e) => {
      if (!modal.classList.contains("is-open")) return;
      if (["ArrowUp", "ArrowDown", "Escape"].includes(e.key)) {
        e.preventDefault();
      }
      if (e.key === "Escape") closeModal();
      if (e.key === "ArrowDown") {
        // 最後の画像なら何もしない
        if (currentIndex < photos.length - 1) showNext(1);
      }
      if (e.key === "ArrowUp") {
        // 最初の画像なら何もしない
        if (currentIndex > 0) showNext(-1);
      }
    });
  </script>
  <script>
    // Force exact top scroll for the header logo to avoid minor offsets and clear hash
    const logoLink = document.querySelector(".logo");
    if (logoLink) {
      logoLink.addEventListener("click", (e) => {
        e.preventDefault();
        try {
          history.replaceState(null, "", location.pathname);
        } catch (e) {}
        window.scrollTo({ top: 0, left: 0, behavior: "smooth" });
      });
    }
  </script>
  <script>
    window.addEventListener("scroll", () => {
      const header = document.querySelector(".sticky-header");
      if (!header) return;
      if (window.scrollY > 10) {
        header.classList.add("scrolled");
      } else {
        header.classList.remove("scrolled");
      }
    });
  </script>
</html>
